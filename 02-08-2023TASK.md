# TASK-1
## 3 TASK ARE GIVEN
### 02-08-2023
## DATABASE
create an instance, make two html pages. On page 1 we have to make a registration page which includes -
user, password, email, phone number.
it also includes a submit button and already a user log-in button.
after clicking on submit button we will proceed to login page which is page 2.
On page 2 we have to make login page which includes - user, password and login button.
All the data we are typing on these pages will go in the EC2 database.
if the data matches with the database it will take us to the welcome page.
if the data doesn't match it will show us a popup invalid user or password.

# SOLUTION-------------------------------
### first of all we have to create an instance using ubuntu AMI.
### launch the instance and connect it through ssh on terminal.
```
ssh -i "your key" ubuntu@(your publicip).compute-1.amazonaws.com
```
### after connecting the instance, type -
```
sudo apt update
```
### in cmd in terminal.
### Now we have to install some required services to move further in our process.
### for web browsing we have to install  ```apache2```. to install apache2 services we have to type the command for installation which is -
```
sudo apt install apache2
```
### after installation of apache2 services. start the servcies type -
```
sudo systemctl start apache2
```
### enable the apache2 services, type -
```
systemctl enable apache2

```
### Now Install the mysql server,
### type - 
```
sudo apt install mysql-server
```
### type -
```
sudo systemctl start mysql

```
### install the PHP service for backend service-
```
sudo apt install php libapache2-mod-php php-mysql
```
### Configure Apache:
### Make sure Apache is running: 
```
sudo service apache2 start
```
### Set the correct permissions for your web files:
```
sudo chown -R www-data:www-data /var/www/html
```
```
sudo chmod -R 755 /var/www/html

```

### Create a MySQL database and user

### Log in to MySQL: 

```
sudo mysql -u root 
```

### Create a new database: 

```
create database your_database_name;
```

### Create a new user and grant privileges to the database:

```
CREATE USER 'your_username'@'localhost' IDENTIFIED BY 'your_password';
```
### to grant all the access to your database

```
GRANT ALL PRIVILEGES ON your_database_name.* TO 'your_username'@'localhost';
```

### then type -

```
FLUSH PRIVILEGES;

```

### Create your project files here in  ```/var/www/html/```  for your project.

```
cd /var/www/html/

```

### Here the main thing starts-

### Now we have to create files in ```/var/www/html/```. so firstly , we have to create ```signup.hmtl``` page. type-

```
sudo vim signup.html

```

### Copy paste the script which is given below -

```
<!DOCTYPE html>
<html>
<head>
<title>signup Page</title>
<img src="https://cdn.dribbble.com/users/751212/screenshots/2510592/media/885bb6c1cd2e2cc207a69e8b96cf9504.gif">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">

<script>
function validateForm() {
    var username = document.forms["registrationForm"]["username"].value;
    var password = document.forms["registrationForm"]["password"].value;
    var email = document.forms["registrationForm"]["email"].value;
    var phone = document.forms["registrationForm"]["phone"].value;

    if (username == "" || password == "" || email == "" || phone == "") {
        alert("Please fill in all the fields.");
        return false;
    }
}
</script>
</head>
<body>
<h1>Registration Page</h1>
<form name="registrationForm" action="database.php" method="post" onsubmit="return validateForm()">
<input type="text" name="username" placeholder="Username">
<input type="password" name="password" placeholder="Password">
<input type="email" name="email" placeholder="Email">
<input type="tel" name="phone" placeholder="Phone Number">
<input type="submit" value="Submit">
<input type="button" value="Login" onclick="window.location.href='login.html'">
</form>
</body>
</html>
```
### press escape ```esc``` button and type ```:wq``` and come out from  vim editor.
### now create the ```login.html``` page by typing -
```
sudo vim login.html
```
### copy paste the script in ```login.html``` which is given below-
```
<!DOCTYPE html>
<html>
<head>
<title>Login Page</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">

</head>
<body>
<h1>Login Page</h1>
<img src="https://cdn.pixabay.com/animation/2022/12/05/10/47/10-47-58-930_512.gif">

<form action="login.php" method="post">
  <input type="text" name="username" placeholder="Username" required>
  <input type="password" name="password" placeholder="Password" required pattern=".{6,}" title="Password must be at least 6 characters long.">
  <input type="submit" value="Login">
</form>
</body>
</html>
```

### signup and login pages are done. now we have to create a database page ```database.php``` for the user data which will help us in login of user..

### To create a ``` database.php``` page type -
```
sudo vim database.php
```

### copy paste the script given below in ```database.php``` page-

```
<?php
$servername = "localhost";
$username = "ec1"; // Replace with your MySQL username
$password = "ec1@123"; // Replace with your MySQL password
$dbname = "myec1";

// Create a connection
$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Get form data from the previous page (page1.html)
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $username = $_POST["username"];
    $password = $_POST["password"];
    $email = $_POST["email"];
    $phone = $_POST["phone"];

    // Insert data into the 'users' table change myec1 here with your table name
    $sql = "INSERT INTO myec1 (username, password, email, phone) VALUES ('$username', '$password', '$email', '$phone')";

    if ($conn->query($sql) === TRUE) {
        echo "Registration Completed";
    } else {
        echo "Error: " . $sql . "<br>" . $conn->error;
    }
}

$conn->close();

```

## NOTE- I HAVE COMMENTED OUT  ```//```  WITH SOME MESSAGE WHERE WE HAVE TO CHANGE THE SCRIPT

### After making the ```database.php```page now we have to do the backend work.

### now we have to make the ```.php``` page for the ```signup.html``` page.we will name that page ```index.php```

### to create the ```index.php``` page type -

```
sudo vim index.php
```

### copy paste the script which is given below in the ```index.php``` page.

```
<?php

session_start();

if (isset($_SESSION["user_id"])) {

    $mysqli = require __DIR__ . "/database.php";

    $sql = "SELECT * FROM user
            WHERE id = {$_SESSION["user_id"]}";

    $result = $mysqli->query($sql);

    $user = $result->fetch_assoc();
}

?>
<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
</head>
<body>

    <h1>Home</h1>

    <?php if (isset($user)): ?>

        <p>Hello <?= htmlspecialchars($user["name"]) ?></p>

        <p><a href="logout.php">Log out</a></p>

    <?php else: ?>

        <p><a href="login.html">Log in</a> or <a href="signup.html">sign up</a></p>

    <?php endif; ?>

</body>
</html>
```

### now we have to make the ```.php``` page for the ```login.html``` page.we will name that page ```login.php```.
### to create the ```login.php``` page type -

```
sudo vim login.php
```

### copy paste the script in ```login.php``` page-
```
<?php
// Replace 'your_db_host', 'your_db_username', 'your_db_password', and 'your_db_name' with your database credentials
$servername = 'localhost';
$username = 'ec1';
$password = 'ec1@123';
$dbname = 'myec1';

// Handling login form submission
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Retrieve user input from the login form
    $inputUsername = $_POST['username'];
    $inputPassword = $_POST['password'];

    // Connect to the database
    $conn = new mysqli($servername, $username, $password, $dbname);

    // Check connection
    if ($conn->connect_error) {
        die('Connection failed:'. $conn->connect_error);
    }

    // Fetch user data from the database based on the input username change the table name myec1 to ur table name
    $query = "SELECT * FROM myec1 WHERE username = '$inputUsername'";
    $result = $conn->query($query);

    if ($result->num_rows === 1) {
        // User found, verify the password
        $row = $result->fetch_assoc();
        $storedPassword = $row['password'];

        if ($inputPassword === $storedPassword) {
            // Passwords match, login successful
            $conn->close();
            header('Location:entert.html');
            exit();
        }
    }

    // Login failed
    $conn->close();
    echo 'Invalid username or password. Please try again.';
}
?>
```
### now we have to create the table in the  ```my sql```  for our users- name,password,email and phone number.
### Log in to MySQL: 

```
sudo mysql -u your_useer_name -p 
```
### type -
```
show databases;
```
### type -
```
use your_database_name;
```
### type to create your table.
```
create table yourdatabasename (userame varchar(50), password varchar(50), email varchar(50), phone int(50)); 
```
### to see your database is created type -
```
select * from your_database_name;
````
### now you have created table for data entry and everything is done...

# TASK -2
create two instances.we have to create a database in instance one and whenever we type some information in database..it shows us in our second instance too... (master and slave data replication with the help of mysql)
